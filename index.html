<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>chatter</title>

    <link
      rel="stylesheet"
      href="https://cdn.skypack.dev/chartist/dist/chartist.min.css"
    />
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <header class="container">
      <h1>chatter</h1>
      <hr />
    </header>

    <main class="container">
      % for title, coins in mention_growth_coins:
      <h2>{{ title }}</h2>
      <table class="coin-table">
        <tr>
          <th>symbol</th>
          <th>polarity</th>
          <th>subjectivity</th>
          <th>content type</th>
          <th>mentions</th>
          <th>price</th>
        </tr>
        % for coin in coins:
        <tr>
          <td>
            <a href="{{ coin['url'] }}" target="_blank">{{ coin['symbol'] }}</a>
          </td>
          <td>
            <div
              class="pie-chart pie-chart--tricolor"
              data-values="{{ coin['pol_positive'] }},{{ coin['pol_neutral'] }},{{ coin['pol_negative'] }}"
              title="{{ coin['pol_positive'] }} positive, {{ coin['pol_neutral'] }} neutral, {{ coin['pol_negative'] }} negative"
            ></div>
          </td>
          <td>
            <div
              class="pie-chart"
              data-values="{{ coin['sub_subjective'] }},{{ coin['sub_objective'] }}"
              title="{{ coin['sub_subjective'] }} subjective, {{ coin['sub_objective'] }} objective"
            ></div>
          </td>
          <td>
            <div
              class="pie-chart"
              data-values="{{ coin['ct_submission'] }},{{ coin['ct_comment'] }}"
              title="{{ coin['ct_submission'] }} submissions, {{ coin['ct_comment'] }} comment"
            ></div>
          </td>
          <td>
            <div
              class="line-chart line-chart--small"
              data-values="{{ ','.join(coin['mentions']) }}"
            ></div>
          </td>
          <td>
            <div
              class="line-chart line-chart--small"
              data-values="{{ ','.join(coin['price']) }}"
            ></div>
          </td>
        </tr>
        % end
      </table>
      % end

      <div class="total">
        % for title, chart_data in total_charts:
        <div>
          <h2>{{ title }}</h2>
          <div class="tab-nav">
            <a href="" class="tab tab--active" data-set-tab="week">week</a>
            <a href="" class="tab" data-set-tab="month">month</a>
            <a href="" class="tab" data-set-tab="quarter">quarter</a>
            <a href="" class="tab" data-set-tab="year">year</a>
          </div>
          <div
            class="line-chart line-chart--big"
            data-values="{{ ','.join(chart_data['week']) }}"
            data-tab="week"
          ></div>
          <div
            class="line-chart line-chart--big hidden"
            data-values="{{ ','.join(chart_data['month']) }}"
            data-tab="month"
          ></div>
          <div
            class="line-chart line-chart--big hidden"
            data-values="{{ ','.join(chart_data['quarter']) }}"
            data-tab="quarter"
          ></div>
          <div
            class="line-chart line-chart--big hidden"
            data-values="{{ ','.join(chart_data['year']) }}"
            data-tab="year"
          ></div>
        </div>
        % end
      </div>
    </main>

    <footer class="container">
      <hr />
      <div class="copy">
        {{ weekly_count["submission"] }} posts and {{ weekly_count["comment"] }}
        comments analyzed in the past week
        <span style="white-space: nowrap">
          | &copy; 2021-{{ current_year }}
          <a href="https://bdeak.net">Bartol Deak</a>
        </span>
      </div>
    </footer>

    <script src="/static/index.js" type="module"></script>
  </body>
</html>
